# 12. toString을 항상 재정의 하라



## toString을 재정의 해야하는 이유

Object의 기본 toString의 경우를 보면 우리가 작성한 클래스에 적합한 문자열을 반환하는 경우가 거의 없다. toString의 경우 '간결하면서 읽기ㅣ 쉬운 형태의 유익한 정보'를 반환해야 한다. PhoneNumber클래스의 기본 toString이 PhoneNumber@aabbd이런 식으로 넘겨주지만 010-8601-6710이런식의 번호를 직접 알려주는 형태가 더욱 유익하다.



~~~java
System.out.println(PhoneNumber+"에 연결할 수 없습니다.")
~~~

PhoneNumber의 toString을 재대로 정의 한다면 위의 코드만으로 문제를 진단하기에 충분한 메시지를 남길 수 있다.



---

## 좋은 toString

* 좋은 toString은 이 인스턴스를 포함하는 객체에서 유용하게 쓰인다.
* 실전에서 toString은 그 객체가 가진 주요 정보 모두를 반환해주는게 좋다.
* 하지만 객체가 꺼대해 지거나 상태가 문자열로 표현하기에 적합하지 않다면 요약정보를 담아야 한다.



---

## toString의 형식을 문서화 할지 말지

toString을 구현하기로 했으면 포맷을 문서화 할지 말지를 정해야 한다.

1. 포맷을 문서화 할 경우
   * 표준적이고 명확하고 사람이 읽을 수 있게 된다.
   * 그 값 그대로 입출력에 사용하거나 CSV파일처럼 사람이 읽을 수 있는 데이터 객체로 저장 할 수도 있다.
   * 포맷을 명시 하기로 했다면 명시한 포멧에 맞는 문자열과 객체를 상호 전환할 수 있는 정ㅇ적 팩터리나 생성자를 함께 재공해 주면 좋다,

~~~Java
    /**
     * 이 전화번호의 문자열 표현을 반환한다.
     * 이 문자열은 "XXX-YYY-ZZZZ" 형태의 12글자로 구성된다.
     * XXX는 지역 코드, YYY는 프리픽스, ZZZZ는 가입자 번호다.
     * 각각의 대문자는 10진수 숫자 하나를 나타낸다.
     *
     * 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면,
     * 앞에서부터 0으로 채워나간다. 예컨대 가입자 번호가 123이라면
     * 전화번호의 마지막 네 문자는 "0123"이 된다.
     */
    @Override public String toString() {
        return String.format("%03d-%03d-%04d",
                areaCode, prefix, lineNum);
    }

~~~





2. 명시 하지 않을 경우
   * 향후 릴리승에서 정보를 더 넣거나 포맷을 개선 할 수 있는 유연성을 얻게 된다.
   * 포맷을 명시하면 평생 그 포맷에 얽메이게 되기 때문이다.

~~~Java
    /**
     * 이 약물에 관한 대략적인 설명을 반환한다.
     * 다음은 이 설명의 일반적인 형태이나,
     * 상세 형식은 정해지지 않았으며 향후 변경될 수 있다, 
     *
     *"[약물 #9: 유형=사랑, 냄새=테레빈유, 겉모습=먹물]"
     */
    @Override public String toString() { ... }
~~~



**포멧을 명시하든 아니든 의도가 명확히 밝혀져야 한다.**



---

## 그 외

* 포맷 명시 여부와 상관없이 toString이 반환 값에 포함된 정보를 얻어올 수 있는 API를 재공하는 것 이 좋다.
  * 그렇지 않으면 toString을 파싱 할 수 밖에 없고 성능이 저하 된다.
* 정적유틸리티 클래스나 열거타입은 재정의할 필요가 없다.
  * 정적유틸리티는 재공할 필요가 없으며 열거타입은 이미 대부분 완벽하게 구현되어 있다.
